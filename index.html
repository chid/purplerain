<!DOCTYPE html>
<html lang="en">
<!-- m = $("#geocomplete").data("plugin_geocomplete").marker
m.setIcon()
 -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Purple Rain</title>
    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/stylish-portfolio.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script src="http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places&key=AIzaSyBtuzM2o99iawMn7CXMuGJnCNW3iaqWGok"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="js/jquery.geocomplete.js"></script>
    <script src="logger.js"></script>
</head>

<body>
    <!-- Navigation --><a id="menu-toggle" href="#" class="btn btn-dark btn-lg toggle"><i class="fa fa-bars"></i></a>
    <nav id="sidebar-wrapper">
        <ul class="sidebar-nav"> <a id="menu-close" href="#" class="btn btn-light btn-lg pull-right toggle"><i class="fa fa-times"></i></a>
            <li class="sidebar-brand"> <a href="#top" onclick=$( "#menu-close").click();>Welcome</a> </li>
            <li> <a href="#top" onclick=$( "#menu-close").click();>Question 1</a> </li>
            <li> <a href="#about" onclick=$( "#menu-close").click();>Question 2 (what do you think)</a> </li>
            <li> <a href="#services" onclick=$( "#menu-close").click();>Answer / Next Steps</a> </li>
            <li> <a href="#portfolio" onclick=$( "#menu-close").click();>Portfolio</a> </li>
            <li> <a href="#contact" onclick=$( "#menu-close").click();>Contact</a> </li>
        </ul>
    </nav>
    <!-- Header -->
    <header id="top" class="header">
        <div class="text-vertical-center"> <img src="img/purp.png" alt="" style="height: 200px;margin-bottom:30px;">
            <h1>PurpleRain</h1>
            <h2>Floods in Australia</h2>
            <h3>We don't think much about the risks of floods in Australia, it is a real risk with a significant annual cost.</h3>
            <h4>Whilst in your area, Sydney CBD, the risks are low</h4>
            <p>Latest issues - http://www.news.com.au/national/communities-count-costs-in-lives-and-livelihoods-as-storm-cleanup-continues/news-story/03f2a9f16aa0f202fd5140ec305eeaf8</p>
            <br>
            <a href="#about" class="btn btn-dark btn-lg">Find Out More</a>
        </div>
    </header>

    <!-- About -->
    <section id="about" class="about full">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Where do your parents live?</h2>
                    
                    <form>
                      <input id="geocomplete" type="text" placeholder="Type in an address" size="300" />
                      <input id="find" type="button" value="find" />
                    </form>
                    <p></p>
                    
                    <div class="map_canvas text-center" style="margin:auto"></div>
                    <p></p>
                    <p class="lead"></p>
                    

<script>
      
    var map;
    var panorama;
    var center;
      var curr;
      var geo;
      var api_response;
      var flood_freq;
      $(document).ready(function(){
        var center = new google.maps.LatLng(-33.8688197,151.2092955);

        $("#geocomplete").geocomplete({
          map: ".map_canvas",
//          types: ['establishment'],
//          mapOptions: {
//              streetView: null
//          },
          markerOptions : {
            icon: '/img/purp.png'
          },
          country: 'au'
        }).bind("geocode:result", function(event, result){
           console.log(result);
           map.setCenter(result.geometry.location.toJSON());
           panorama = map.getStreetView();
           panorama.setPosition(result.geometry.location.toJSON());
           curr = result.geometry.location;
           
           var service = new google.maps.StreetViewService;
          // call the "getPanoramaByLocation" function of the Streetview Services to return the closest streetview position for the entered coordinates
          service.getPanoramaByLocation(panorama.getPosition(), 50, function(panoData) {
            // if the function returned a result
            if (panoData != null) {
              // the GPS coordinates of the streetview camera position
              var panoCenter = panoData.location.latLng;
              // this is where the magic happens!
              // the "computeHeading" function calculates the heading with the two GPS coordinates entered as parameters
              console.log(result.geometry.location.toJSON());
              var heading = google.maps.geometry.spherical.computeHeading(panoCenter, result.geometry.location);
              // now we know the heading (camera direction, elevation, zoom, etc) set this as parameters to the panorama object
              var pov = panorama.getPov();
              pov.heading = heading;
              panorama.setPov(pov);
              // set a marker on the location we are looking at, to verify the calculations were correct
//              var marker = new google.maps.Marker({
//                map: pano,
//                position: lookTo
//              });
            } else {
              // no streetview found :(
              alert('not found');
            }
        
      }); 
           
           panorama.setVisible(true)
        });;

        map =  $("#geocomplete").geocomplete("map")

        map.setCenter(center);
        map.setZoom(20);
      });
    </script>                    
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>

    <!-- Services -->
    <!-- The circle icons use Font Awesome's stacked icon classes. For more information, visit http://fontawesome.io/examples/ -->
    <section id="services" class="services bg-primary">
        <div class="container">
            <div class="row text-center">
                <div class="col-lg-10 col-lg-offset-1">
                    <h2>Other Risk Factors</h2>
                    <hr class="small"/>
                    <div class="row">
                        <div class="col-md-3 col-sm-6">
                            <div class="service-item">
                                <span class="fa-stack fa-4x">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-cloud fa-stack-1x text-primary"></i>
                            </span>
                                <h4>
                                    <strong>Storms & Hail</strong>
                                </h4>
            <p></p> <a href="#" class="btn btn-light">Learn More</a> </div>
        </div>
        <div class="col-md-3 col-sm-6">
            <div class="service-item"> <span class="fa-stack fa-4x">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-compass fa-stack-1x text-primary"></i>
                                    </span>
                <h4>
                                            <strong>Service Name</strong>
                                        </h4>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p> <a href="#" class="btn btn-light">Learn More</a> </div>
        </div>
        <div class="col-md-3 col-sm-6">
            <div class="service-item"> <span class="fa-stack fa-4x">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-flask fa-stack-1x text-primary"></i>
                            </span>
                <h4>
                                    <strong>Service Name</strong>
                                </h4>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p> <a href="#" class="btn btn-light">Learn More</a> </div>
        </div>
        <div class="col-md-3 col-sm-6">
            <div class="service-item"> <span class="fa-stack fa-4x">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-shield fa-stack-1x text-primary"></i>
                            </span>
                <h4>
                                    <strong>Service Name</strong>
                                </h4>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p> <a href="#" class="btn btn-light">Learn More</a> </div>
        </div>
        </div>
        <!-- /.row (nested) -->
        </div>
        <!-- /.col-lg-10 -->
        </div>
        <!-- /.row -->
        </div>
        <!-- /.container -->
        </section>
        <!-- Callout -->
        <aside class="callout">
            <div class="text-vertical-center">
                <h1>Vertically Centered Text</h1> </div>
        </aside>
        <!-- Portfolio -->
        <section id="portfolio" class="portfolio">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 col-lg-offset-1 text-center">
                        <h2>Our Work</h2>
                        <hr class="small">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="portfolio-item">
                                    <a href="#"> <img class="img-portfolio img-responsive" src="img/portfolio-1.jpg"> </a>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="portfolio-item">
                                    <a href="#"> <img class="img-portfolio img-responsive" src="img/portfolio-2.jpg"> </a>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="portfolio-item">
                                    <a href="#"> <img class="img-portfolio img-responsive" src="img/portfolio-3.jpg"> </a>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="portfolio-item">
                                    <a href="#"> <img class="img-portfolio img-responsive" src="img/portfolio-4.jpg"> </a>
                                </div>
                            </div>
                        </div>
                        <!-- /.row (nested) --><a href="#" class="btn btn-dark">View More Items</a> </div>
                    <!-- /.col-lg-10 -->
                </div>
                <!-- /.row -->
            </div>
            <!-- /.container -->
        </section>
        <!-- Call to Action -->
        <aside class="call-to-action bg-primary full">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <h3>Do you think this location will experience a flood (within 30 years)?</h3>
                        <h1>PUT A MAP HERE</h1> <a href="#yay" class="btn btn-lg btn-light">Yes</a> <a href="#" class="btn btn-lg btn-light">No</a> </div>
                </div>
            </div>
        </aside>
        <section id="correct" class="portfolio">
            <!-- Call to Action -->
            <aside class="call-to-action bg-success">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12 text-center">
                            <h3>YAY</h3>
                            <h1>Great correct.
You seem to have a good eye for detecting flood risk!
                    </h1>
                            <br/>
                            <h4>
        Share with your family
        </h4>
                            <ul class="list-inline">
                                <li> <a href="#"><i class="fa fa-facebook fa-fw fa-3x"></i></a> </li>
                                <li> <a href="#"><i class="fa fa-twitter fa-fw fa-3x"></i></a> </li>
                                <li> <a href="mailto:message='Hi,Your purple rain rating was high found your location  is prone to high risk of flooding based on public data available. Dont wait until its too late, think about getting quick quote today at <> protect your property today.'"><i class="fa fa-envelope fa-fw fa-3x"></i></a> </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </aside>
        </section>
        <section id="incorrect" class="portfolio">
            <!-- Call to Action -->
            <aside class="call-to-action bg-danger">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12 text-center">
                            <h3>NOOOOOOOO</h3>
                            <h1>
You are failing
You seem to have a good eye for detecting flood. Based on the elevation of land a minimun of this 20mm would start to cause flooding to this location
        
        your 
        </h1> </div>
                    </div>
                </div>
            </aside>
        </section>
        <!-- Map -->
        <!--
    <section id="contact" class="map">
        <iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Twitter,+Inc.,+Market+Street,+San+Francisco,+CA&amp;aq=0&amp;oq=twitter&amp;sll=28.659344,-81.187888&amp;sspn=0.128789,0.264187&amp;ie=UTF8&amp;hq=Twitter,+Inc.,+Market+Street,+San+Francisco,+CA&amp;t=m&amp;z=15&amp;iwloc=A&amp;output=embed"></iframe>
        <br />
        <small>
            <a href="https://maps.google.com/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=Twitter,+Inc.,+Market+Street,+San+Francisco,+CA&amp;aq=0&amp;oq=twitter&amp;sll=28.659344,-81.187888&amp;sspn=0.128789,0.264187&amp;ie=UTF8&amp;hq=Twitter,+Inc.,+Market+Street,+San+Francisco,+CA&amp;t=m&amp;z=15&amp;iwloc=A"></a>
        </small>
        </iframe>
    </section>
-->
        <section id="data" class="services bg-primary map">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 col-lg-offset-1 text-center">
                        <h2>Data used</h2>
                        <ul>
                            <li> IaG Flood Data - </li>
                            <li> Google Maps (Elevation) </li>
                            <li> Floodmaps. </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 col-lg-offset-1 text-center">
                        <h4><strong>Start Bootstrap</strong>
                    </h4>
                        <p>3481 Melrose Place
                            <br>Beverly Hills, CA 90210</p>
                        <ul class="list-unstyled">
                            <li><i class="fa fa-phone fa-fw"></i> (123) 456-7890</li>
                            <li><i class="fa fa-envelope-o fa-fw"></i> <a href="mailto:name@example.com">name@example.com</a> </li>
                        </ul>
                        <br>
                        <ul class="list-inline">
                            <li> <a href="#"><i class="fa fa-facebook fa-fw fa-3x"></i></a> </li>
                            <li> <a href="#"><i class="fa fa-twitter fa-fw fa-3x"></i></a> </li>
                            <li> <a href="#"><i class="fa fa-dribbble fa-fw fa-3x"></i></a> </li>
                        </ul>
                        <hr class="small">
                        <p class="text-muted">Copyright &copy; AC Group LTD PTY GBMH</p>
                    </div>
                </div>
            </div> <a id="to-top" href="#top" class="btn btn-dark btn-lg"><i class="fa fa-chevron-up fa-fw fa-1x"></i></a> </footer>
        <!-- jQuery -->
        <!--    <script src="js/jquery.js"></script>-->
        <!-- Bootstrap Core JavaScript -->
        <script src="js/bootstrap.min.js"></script>
        <!-- Custom Theme JavaScript -->
        <script>
            // Closes the sidebar menu
            $("#menu-close").click(function (e) {
                e.preventDefault();
                $("#sidebar-wrapper").toggleClass("active");
            });
            // Opens the sidebar menu
            $("#menu-toggle").click(function (e) {
                e.preventDefault();
                $("#sidebar-wrapper").toggleClass("active");
            });
            // Scrolls to the selected menu item on the page
            $(function () {
                $('a[href*=#]:not([href=#],[data-toggle],[data-target],[data-slide])').click(function () {
                    if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') || location.hostname == this.hostname) {
                        var target = $(this.hash);
                        target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                        if (target.length) {
                            $('html,body').animate({
                                scrollTop: target.offset().top
                            }, 1000);
                            return false;
                        }
                    }
                });
            });
            //#to-top button appears after scrolling
            var fixed = false;
            $(document).scroll(function () {
                if ($(this).scrollTop() > 250) {
                    if (!fixed) {
                        fixed = true;
                        // $('#to-top').css({position:'fixed', display:'block'});
                        $('#to-top').show("slow", function () {
                            $('#to-top').css({
                                position: 'fixed'
                                , display: 'block'
                            });
                        });
                    }
                }
                else {
                    if (fixed) {
                        fixed = false;
                        $('#to-top').hide("slow", function () {
                            $('#to-top').css({
                                display: 'none'
                            });
                        });
                    }
                }
            });
            // Disable Google Maps scrolling
            // See http://stackoverflow.com/a/25904582/1607849
            // Disable scroll zooming and bind back the click event
            var onMapMouseleaveHandler = function (event) {
                var that = $(this);
                that.on('click', onMapClickHandler);
                that.off('mouseleave', onMapMouseleaveHandler);
                that.find('iframe').css("pointer-events", "none");
            }
            var onMapClickHandler = function (event) {
                    var that = $(this);
                    // Disable the click handler until the user leaves the map area
                    that.off('click', onMapClickHandler);
                    // Enable scrolling zoom
                    that.find('iframe').css("pointer-events", "auto");
                    // Handle the mouse leave event
                    that.on('mouseleave', onMapMouseleaveHandler);
                }
                // Enable map zooming with mouse scroll when the user clicks the map
            $('.map').on('click', onMapClickHandler);
        </script>
</body>

</html>